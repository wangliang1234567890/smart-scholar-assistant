# æ™ºèƒ½å­¦éœ¸å°åŠ©æ‰‹ - ä»£ç å¼€å‘è§„èŒƒ

## ğŸ“‹ ç›®å½•
- [æ€»ä½“åŸåˆ™](#æ€»ä½“åŸåˆ™)
- [JavaScript ç¼–ç è§„èŒƒ](#javascript-ç¼–ç è§„èŒƒ)
- [WXML æ¨¡æ¿è§„èŒƒ](#wxml-æ¨¡æ¿è§„èŒƒ)
- [WXSS æ ·å¼è§„èŒƒ](#wxss-æ ·å¼è§„èŒƒ)
- [ç›®å½•ç»“æ„è§„èŒƒ](#ç›®å½•ç»“æ„è§„èŒƒ)
- [å‘½åè§„èŒƒ](#å‘½åè§„èŒƒ)
- [æ³¨é‡Šè§„èŒƒ](#æ³¨é‡Šè§„èŒƒ)
- [ç»„ä»¶å¼€å‘è§„èŒƒ](#ç»„ä»¶å¼€å‘è§„èŒƒ)
- [äº‘å‡½æ•°å¼€å‘è§„èŒƒ](#äº‘å‡½æ•°å¼€å‘è§„èŒƒ)
- [é”™è¯¯å¤„ç†è§„èŒƒ](#é”™è¯¯å¤„ç†è§„èŒƒ)
- [æ€§èƒ½ä¼˜åŒ–è§„èŒƒ](#æ€§èƒ½ä¼˜åŒ–è§„èŒƒ)
- [ä»£ç æäº¤è§„èŒƒ](#ä»£ç æäº¤è§„èŒƒ)

## ğŸ¯ æ€»ä½“åŸåˆ™

### ä»£ç è´¨é‡åŸåˆ™
- **å¯è¯»æ€§ä¼˜å…ˆ**: ä»£ç åº”è¯¥æ¸…æ™°æ˜“æ‡‚ï¼Œè‡ªè§£é‡Š
- **ä¸€è‡´æ€§**: æ•´ä¸ªé¡¹ç›®ä¿æŒç»Ÿä¸€çš„ç¼–ç é£æ ¼
- **æ€§èƒ½æ„è¯†**: è€ƒè™‘å°ç¨‹åºæ€§èƒ½ç‰¹ç‚¹ï¼Œé¿å…è¿‡åº¦æ¸²æŸ“
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æ•è·å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- **å¯ç»´æŠ¤æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä½è€¦åˆé«˜å†…èš

### å¼€å‘æµç¨‹
1. **ESLintæ£€æŸ¥**: æäº¤å‰å¿…é¡»é€šè¿‡ `npm run lint`
2. **åŠŸèƒ½æµ‹è¯•**: åœ¨çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ä¸Šæµ‹è¯•
3. **ä»£ç å®¡æŸ¥**: é‡è¦åŠŸèƒ½éœ€è¦ä»£ç å®¡æŸ¥
4. **æ–‡æ¡£æ›´æ–°**: æ–°åŠŸèƒ½éœ€è¦æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ’» JavaScript ç¼–ç è§„èŒƒ

### åŸºç¡€è¯­æ³•è§„èŒƒ

#### ç¼©è¿›å’Œæ¢è¡Œ
```javascript
// âœ… æ­£ç¡®: ä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿›
if (condition) {
  doSomething();
}

// âŒ é”™è¯¯: ä½¿ç”¨tabæˆ–4ä¸ªç©ºæ ¼
if (condition) {
    doSomething();
}
```

#### å¼•å·ä½¿ç”¨
```javascript
// âœ… æ­£ç¡®: ç»Ÿä¸€ä½¿ç”¨å•å¼•å·
const message = 'è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯';
const template = `Hello ${name}`;

// âŒ é”™è¯¯: æ··ç”¨åŒå¼•å·
const message = "è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯";
```

#### åˆ†å·ä½¿ç”¨
```javascript
// âœ… æ­£ç¡®: è¯­å¥ç»“å°¾å¿…é¡»åŠ åˆ†å·
const name = 'smart-assistant';
functionCall();

// âŒ é”™è¯¯: ç¼ºå°‘åˆ†å·
const name = 'smart-assistant'
functionCall()
```

### ES6+ ç‰¹æ€§ä½¿ç”¨

#### å˜é‡å£°æ˜
```javascript
// âœ… æ­£ç¡®: ä¼˜å…ˆä½¿ç”¨ constï¼Œéœ€è¦é‡æ–°èµ‹å€¼æ—¶ä½¿ç”¨ let
const API_URL = 'https://api.example.com';
let currentPage = 1;

// âŒ é”™è¯¯: ä½¿ç”¨ var
var userName = 'user';
```

#### ç®­å¤´å‡½æ•°
```javascript
// âœ… æ­£ç¡®: ä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°
const handleClick = () => {
  console.log('ç‚¹å‡»äº‹ä»¶');
};

// ç®€å•è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨å•è¡Œ
const double = x => x * 2;

// âŒ é”™è¯¯: ä¸å¿…è¦çš„ function å£°æ˜
const handleClick = function() {
  console.log('ç‚¹å‡»äº‹ä»¶');
};
```

#### æ¨¡æ¿å­—ç¬¦ä¸²
```javascript
// âœ… æ­£ç¡®: ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥
const message = `ç”¨æˆ· ${userName} ç™»å½•æˆåŠŸ`;

// âŒ é”™è¯¯: ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥
const message = 'ç”¨æˆ· ' + userName + ' ç™»å½•æˆåŠŸ';
```

#### è§£æ„èµ‹å€¼
```javascript
// âœ… æ­£ç¡®: ä½¿ç”¨è§£æ„èµ‹å€¼
const { name, age } = userInfo;
const [first, second] = arrayData;

// å‡½æ•°å‚æ•°è§£æ„
function updateUser({ id, name, email }) {
  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
}
```

### å‡½æ•°è§„èŒƒ

#### å‡½æ•°å‘½åå’Œç»“æ„
```javascript
// âœ… æ­£ç¡®: å‡½æ•°åä½¿ç”¨é©¼å³°å‘½åï¼ŒåŠ¨è¯å¼€å¤´
async function loadUserData(userId) {
  try {
    const response = await api.getUser(userId);
    return {
      success: true,
      data: response.data
    };
  } catch (error) {
    console.error('åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥:', error);
    return {
      success: false,
      error: error.message
    };
  }
}

// äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨ on æˆ– handle å‰ç¼€
function onLoginSuccess(userInfo) {
  // å¤„ç†ç™»å½•æˆåŠŸ
}

function handleFormSubmit(formData) {
  // å¤„ç†è¡¨å•æäº¤
}
```

#### å¼‚æ­¥å¤„ç†
```javascript
// âœ… æ­£ç¡®: ä½¿ç”¨ async/await
async function fetchMistakes() {
  try {
    const result = await DatabaseManager.getMistakes(userId);
    if (result.success) {
      this.setData({ mistakes: result.data });
    }
  } catch (error) {
    this.handleError(error);
  }
}

// âŒ é”™è¯¯: ä½¿ç”¨ Promise.then é“¾å¼è°ƒç”¨
function fetchMistakes() {
  DatabaseManager.getMistakes(userId)
    .then(result => {
      this.setData({ mistakes: result.data });
    })
    .catch(error => {
      this.handleError(error);
    });
}
```

### å¯¹è±¡å’Œæ•°ç»„è§„èŒƒ

#### å¯¹è±¡å­—é¢é‡
```javascript
// âœ… æ­£ç¡®: å¯¹è±¡å±æ€§ç®€å†™
const userProfile = {
  name,
  age,
  avatar,
  // æ–¹æ³•ç®€å†™
  updateProfile() {
    // æ›´æ–°é€»è¾‘
  }
};

// âŒ é”™è¯¯: å®Œæ•´å†™æ³•
const userProfile = {
  name: name,
  age: age,
  avatar: avatar,
  updateProfile: function() {
    // æ›´æ–°é€»è¾‘
  }
};
```

#### æ•°ç»„æ“ä½œ
```javascript
// âœ… æ­£ç¡®: ä½¿ç”¨æ•°ç»„æ–¹æ³•è€Œä¸æ˜¯å¾ªç¯
const filteredMistakes = mistakes.filter(item => item.subject === 'math');
const mistakeIds = mistakes.map(item => item.id);
const hasNewMistake = mistakes.some(item => item.status === 'new');

// âŒ é”™è¯¯: ä½¿ç”¨ä¼ ç»Ÿå¾ªç¯
const filteredMistakes = [];
for (let i = 0; i < mistakes.length; i++) {
  if (mistakes[i].subject === 'math') {
    filteredMistakes.push(mistakes[i]);
  }
}
```

## ğŸ“„ WXML æ¨¡æ¿è§„èŒƒ

### åŸºç¡€ç»“æ„
```xml
<!-- âœ… æ­£ç¡®: æ¸…æ™°çš„ç»“æ„å’Œç¼©è¿› -->
<view class="page-container">
  <view class="header-section">
    <text class="header-title">{{pageTitle}}</text>
  </view>
  
  <view class="content-section">
    <view wx:for="{{dataList}}" wx:key="id" class="list-item">
      <text class="item-title">{{item.title}}</text>
    </view>
  </view>
</view>

<!-- âŒ é”™è¯¯: ç»“æ„æ··ä¹±ï¼Œç¼ºå°‘è¯­ä¹‰åŒ– -->
<view>
  <view>{{pageTitle}}</view>
  <view wx:for="{{dataList}}">
    <view>{{item.title}}</view>
  </view>
</view>
```

### æ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“
```xml
<!-- âœ… æ­£ç¡®: åˆç†ä½¿ç”¨æ¡ä»¶æ¸²æŸ“ -->
<view wx:if="{{loading}}" class="loading-container">
  <van-loading type="spinner" />
</view>

<view wx:elif="{{dataList.length === 0}}" class="empty-state">
  <text class="empty-text">æš‚æ— æ•°æ®</text>
</view>

<view wx:else class="data-list">
  <view 
    wx:for="{{dataList}}" 
    wx:key="id"
    class="list-item"
    bind:tap="handleItemTap"
    data-id="{{item.id}}"
  >
    <text class="item-title">{{item.title}}</text>
  </view>
</view>
```

### äº‹ä»¶ç»‘å®š
```xml
<!-- âœ… æ­£ç¡®: æ˜ç¡®çš„äº‹ä»¶ç»‘å®š -->
<van-button 
  type="primary" 
  bind:tap="handleSubmit"
  data-form-type="login"
  disabled="{{submitting}}"
>
  {{submitting ? 'æäº¤ä¸­...' : 'ç¡®è®¤æäº¤'}}
</van-button>

<!-- âŒ é”™è¯¯: äº‹ä»¶ç»‘å®šä¸æ˜ç¡® -->
<button bindtap="submit">æäº¤</button>
```

## ğŸ¨ WXSS æ ·å¼è§„èŒƒ

### CSS ç±»å‘½å
```css
/* âœ… æ­£ç¡®: ä½¿ç”¨ BEM å‘½åè§„èŒƒ */
.mistake-card {
  /* å¡ç‰‡å®¹å™¨ */
}

.mistake-card__header {
  /* å¡ç‰‡å¤´éƒ¨ */
}

.mistake-card__title {
  /* å¡ç‰‡æ ‡é¢˜ */
}

.mistake-card--featured {
  /* ç‰¹è‰²å¡ç‰‡ä¿®é¥°ç¬¦ */
}

/* âŒ é”™è¯¯: å‘½åä¸è§„èŒƒ */
.card1 {
  /* ä¸æ¸…æ¥šçš„å‘½å */
}

.redTitle {
  /* æ··åˆé©¼å³°å’Œè¯­ä¹‰ */
}
```

### å“åº”å¼è®¾è®¡
```css
/* âœ… æ­£ç¡®: ä½¿ç”¨ rpx å•ä½é€‚é…ä¸åŒå±å¹• */
.container {
  width: 750rpx;
  padding: 32rpx;
  margin: 24rpx auto;
}

.text-large {
  font-size: 36rpx;
  line-height: 1.4;
}

/* âŒ é”™è¯¯: ä½¿ç”¨å›ºå®šåƒç´ å•ä½ */
.container {
  width: 375px;
  padding: 16px;
}
```

### æ ·å¼ç»„ç»‡
```css
/* âœ… æ­£ç¡®: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡æ ·å¼ */

/* === é¡µé¢å¸ƒå±€ === */
.page-container {
  min-height: 100vh;
  background-color: #f5f5f5;
}

/* === å¤´éƒ¨æ ·å¼ === */
.header-section {
  padding: 32rpx;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* === å†…å®¹åŒºåŸŸ === */
.content-section {
  padding: 24rpx;
}

/* === ç»„ä»¶æ ·å¼ === */
.mistake-card {
  background-color: #ffffff;
  border-radius: 16rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);
  margin-bottom: 24rpx;
}
```

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

### é¡¹ç›®ç›®å½•ç»„ç»‡
```
smart1.0/
â”œâ”€â”€ app.js                 # åº”ç”¨å…¥å£
â”œâ”€â”€ app.json              # åº”ç”¨é…ç½®
â”œâ”€â”€ app.wxss             # å…¨å±€æ ·å¼
â”œâ”€â”€ components/          # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”œâ”€â”€ section-header/  # åŒºå—å¤´éƒ¨ç»„ä»¶
â”‚   â””â”€â”€ stats-grid/      # ç»Ÿè®¡ç½‘æ ¼ç»„ä»¶
â”œâ”€â”€ pages/               # é¡µé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ home/           # é¦–é¡µ
â”‚   â”œâ”€â”€ mistakes/       # é”™é¢˜æœ¬æ¨¡å—
â”‚   â”œâ”€â”€ practice/       # ç»ƒä¹ æ¨¡å—
â”‚   â”œâ”€â”€ camera/         # æ‹ç…§æ¨¡å—
â”‚   â””â”€â”€ profile/        # ä¸ªäººä¸­å¿ƒ
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ai-service.js   # AIæœåŠ¡
â”‚   â”œâ”€â”€ database.js     # æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ common.js       # é€šç”¨å·¥å…·
â”‚   â””â”€â”€ constants.js    # å¸¸é‡å®šä¹‰
â”œâ”€â”€ cloud/              # äº‘å¼€å‘
â”‚   â””â”€â”€ functions/      # äº‘å‡½æ•°
â”œâ”€â”€ images/             # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ icons/          # å›¾æ ‡
â”‚   â””â”€â”€ tab/           # æ ‡ç­¾æ å›¾æ ‡
â””â”€â”€ store/              # çŠ¶æ€ç®¡ç†
```

### é¡µé¢æ–‡ä»¶ç»„ç»‡
```
pages/mistakes/
â”œâ”€â”€ mistakes.js          # é¡µé¢é€»è¾‘
â”œâ”€â”€ mistakes.json        # é¡µé¢é…ç½®
â”œâ”€â”€ mistakes.wxml        # é¡µé¢ç»“æ„
â”œâ”€â”€ mistakes.wxss        # é¡µé¢æ ·å¼
â”œâ”€â”€ add.js              # æ·»åŠ é”™é¢˜é¡µé¢
â”œâ”€â”€ add.json
â”œâ”€â”€ add.wxml
â”œâ”€â”€ add.wxss
â”œâ”€â”€ detail.js           # é”™é¢˜è¯¦æƒ…é¡µé¢
â”œâ”€â”€ detail.json
â”œâ”€â”€ detail.wxml
â””â”€â”€ detail.wxss
```

## ğŸ·ï¸ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å
```bash
# âœ… æ­£ç¡®: ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
user-profile.js
mistake-detail.wxml
ai-service.js

# âŒ é”™è¯¯: ä½¿ç”¨é©¼å³°æˆ–ä¸‹åˆ’çº¿
userProfile.js
mistake_detail.wxml
AiService.js
```

### å˜é‡å‘½å
```javascript
// âœ… æ­£ç¡®: é©¼å³°å‘½åï¼Œè¯­ä¹‰æ¸…æ™°
const userName = 'xiaoming';
const isLoading = false;
const mistakeList = [];
const currentPageIndex = 0;

// å¸¸é‡ä½¿ç”¨å¤§å†™ä¸‹åˆ’çº¿
const API_BASE_URL = 'https://api.example.com';
const MAX_RETRY_COUNT = 3;

// âŒ é”™è¯¯: å‘½åä¸è§„èŒƒ
const user_name = 'xiaoming';
const IsLoading = false;
const list = [];
const idx = 0;
```

### å‡½æ•°å‘½å
```javascript
// âœ… æ­£ç¡®: åŠ¨è¯å¼€å¤´ï¼Œæè¿°åŠŸèƒ½
function getUserInfo() { }
function updateMistakeStatus() { }
function handleFormSubmit() { }
function onLoginSuccess() { }
function validateUserInput() { }

// å¸ƒå°”å€¼åˆ¤æ–­å‡½æ•°ä½¿ç”¨ is/has/can å‰ç¼€
function isValidEmail(email) { }
function hasPermission(user) { }
function canEdit(item) { }

// âŒ é”™è¯¯: å‘½åä¸æ¸…æ™°
function user() { }
function data() { }
function click() { }
```

## ğŸ“ æ³¨é‡Šè§„èŒƒ

### æ–‡ä»¶å¤´æ³¨é‡Š
```javascript
/**
 * é”™é¢˜ç®¡ç†å·¥å…·ç±»
 * 
 * åŠŸèƒ½è¯´æ˜ï¼š
 * - é”™é¢˜çš„å¢åˆ æ”¹æŸ¥
 * - é”™é¢˜çŠ¶æ€ç®¡ç†
 * - é”™é¢˜æ•°æ®ç»Ÿè®¡
 * 
 * @author Smart Study Team
 * @since 1.0.0
 * @lastModified 2024-01-15
 */
```

### å‡½æ•°æ³¨é‡Š
```javascript
/**
 * åˆ†æå›¾ç‰‡ä¸­çš„é¢˜ç›®å†…å®¹
 * 
 * @param {string} imagePath - å›¾ç‰‡æ–‡ä»¶è·¯å¾„
 * @param {Object} options - åˆ†æé€‰é¡¹
 * @param {boolean} options.enhanceAccuracy - æ˜¯å¦å¢å¼ºè¯†åˆ«ç²¾åº¦
 * @param {string} options.subject - é¢˜ç›®å­¦ç§‘ï¼ˆå¯é€‰ï¼‰
 * @returns {Promise<Object>} åˆ†æç»“æœ
 * @example
 * 
 * const result = await analyzeQuestionFromImage('/path/to/image.jpg', {
 *   enhanceAccuracy: true,
 *   subject: 'math'
 * });
 */
async function analyzeQuestionFromImage(imagePath, options = {}) {
  // å®ç°é€»è¾‘
}
```

### ä»£ç è¡Œå†…æ³¨é‡Š
```javascript
// âœ… æ­£ç¡®: è§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·åš
// ä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹è§¦å‘æœç´¢è¯·æ±‚
const debouncedSearch = debounce(this.performSearch, 300);

// ç‰¹æ®Šæƒ…å†µéœ€è¦è¯´æ˜åŸå› 
if (Platform.OS === 'ios') {
  // iOS ç³»ç»Ÿéœ€è¦é¢å¤–çš„æƒé™å¤„ç†
  requestIOSPermissions();
}

// âŒ é”™è¯¯: é‡å¤ä»£ç å†…å®¹
// è®¾ç½®ç”¨æˆ·åä¸ºxiaoming
const userName = 'xiaoming';

// è°ƒç”¨å‡½æ•°
callFunction();
```

### TODO æ³¨é‡Šè§„èŒƒ
```javascript
// TODO: [ä¼˜å…ˆçº§] æè¿° - è´Ÿè´£äºº - é¢„æœŸå®Œæˆæ—¶é—´
// TODO: [HIGH] å®ç°æ™ºèƒ½å¤ä¹ ç®—æ³• - @å¼ ä¸‰ - 2024-02-01
// TODO: [MID] ä¼˜åŒ–å›¾ç‰‡å‹ç¼©ç®—æ³• - @æå›› - 2024-02-15
// TODO: [LOW] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½ - @ç‹äº” - 2024-03-01

// FIXME: ä¿®å¤å·²çŸ¥é—®é¢˜
// FIXME: åœ¨æŸäº›Androidè®¾å¤‡ä¸Šå›¾ç‰‡ä¸Šä¼ å¤±è´¥

// HACK: ä¸´æ—¶è§£å†³æ–¹æ¡ˆ
// HACK: æš‚æ—¶ä½¿ç”¨è½®è¯¢æ›¿ä»£WebSocketï¼Œç­‰å¾…å°ç¨‹åºæ”¯æŒ
```

## ğŸ§© ç»„ä»¶å¼€å‘è§„èŒƒ

### ç»„ä»¶ç»“æ„
```javascript
// components/mistake-card/index.js
Component({
  /**
   * ç»„ä»¶å±æ€§
   */
  properties: {
    // é”™é¢˜æ•°æ®
    mistakeData: {
      type: Object,
      value: {},
      observer(newVal, oldVal) {
        // å±æ€§å˜åŒ–ç›‘å¬
        this.updateDisplay();
      }
    },
    
    // æ˜¯å¦æ˜¾ç¤ºæ“ä½œæŒ‰é’®
    showActions: {
      type: Boolean,
      value: true
    }
  },

  /**
   * ç»„ä»¶æ•°æ®
   */
  data: {
    displayText: '',
    isExpanded: false
  },

  /**
   * ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
   */
  lifetimes: {
    attached() {
      // ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ
      this.initComponent();
    },
    
    detached() {
      // ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œ
      this.cleanup();
    }
  },

  /**
   * ç»„ä»¶æ–¹æ³•
   */
  methods: {
    /**
     * åˆå§‹åŒ–ç»„ä»¶
     */
    initComponent() {
      this.updateDisplay();
    },

    /**
     * æ›´æ–°æ˜¾ç¤ºå†…å®¹
     */
    updateDisplay() {
      const { mistakeData } = this.properties;
      this.setData({
        displayText: this.formatText(mistakeData.content)
      });
    },

    /**
     * å¤„ç†ç‚¹å‡»äº‹ä»¶
     */
    handleTap() {
      this.triggerEvent('tap', {
        mistakeId: this.properties.mistakeData.id
      });
    },

    /**
     * æ¸…ç†èµ„æº
     */
    cleanup() {
      // æ¸…ç†å®šæ—¶å™¨ã€å–æ¶ˆè¯·æ±‚ç­‰
    }
  }
});
```

## â˜ï¸ äº‘å‡½æ•°å¼€å‘è§„èŒƒ

### äº‘å‡½æ•°ç»“æ„
```javascript
// cloud/functions/ai-grading/index.js
const cloud = require('wx-server-sdk');

// åˆå§‹åŒ–äº‘å¼€å‘
cloud.init({
  env: cloud.DYNAMIC_CURRENT_ENV
});

/**
 * AIæ™ºèƒ½æ‰¹æ”¹äº‘å‡½æ•°
 */
exports.main = async (event, context) => {
  const startTime = Date.now();
  const requestId = generateRequestId();
  
  console.log(`[${requestId}] æ™ºèƒ½æ‰¹æ”¹äº‘å‡½æ•°å¼€å§‹æ‰§è¡Œ:`, {
    hasQuestion: !!event.question,
    hasAnswer: !!event.userAnswer,
    questionType: event.question?.type
  });

  try {
    // å‚æ•°éªŒè¯
    validateParameters(event);
    
    // æ‰§è¡Œæ‰¹æ”¹é€»è¾‘
    const result = await performGrading(event, requestId);
    
    // è¿”å›ç»“æœ
    return createSuccessResponse(result, {
      processingTime: Date.now() - startTime,
      requestId
    });
    
  } catch (error) {
    console.error(`[${requestId}] æ‰¹æ”¹å¤±è´¥:`, error);
    
    return createErrorResponse(error, {
      processingTime: Date.now() - startTime,
      requestId
    });
  }
};

/**
 * å‚æ•°éªŒè¯
 */
function validateParameters(event) {
  const requiredFields = ['question', 'userAnswer', 'standardAnswer'];
  
  for (const field of requiredFields) {
    if (!event[field]) {
      throw new Error(`ç¼ºå°‘å¿…éœ€å‚æ•°: ${field}`);
    }
  }
}

/**
 * æ‰§è¡Œæ‰¹æ”¹
 */
async function performGrading(event, requestId) {
  // å…·ä½“æ‰¹æ”¹é€»è¾‘
}
```

### é”™è¯¯å¤„ç†
```javascript
/**
 * åˆ›å»ºæˆåŠŸå“åº”
 */
function createSuccessResponse(data, metadata = {}) {
  return {
    success: true,
    data,
    metadata: {
      timestamp: new Date().toISOString(),
      ...metadata
    }
  };
}

/**
 * åˆ›å»ºé”™è¯¯å“åº”
 */
function createErrorResponse(error, metadata = {}) {
  return {
    success: false,
    error: {
      code: error.code || 'UNKNOWN_ERROR',
      message: error.message || 'æœªçŸ¥é”™è¯¯',
      details: error.details || null
    },
    metadata: {
      timestamp: new Date().toISOString(),
      ...metadata
    }
  };
}
```

## âš ï¸ é”™è¯¯å¤„ç†è§„èŒƒ

### å‰ç«¯é”™è¯¯å¤„ç†
```javascript
// âœ… æ­£ç¡®: å®Œæ•´çš„é”™è¯¯å¤„ç†
async function loadMistakes() {
  try {
    this.setData({ loading: true });
    
    const result = await DatabaseManager.getMistakes(this.userId);
    
    if (result.success) {
      this.setData({
        mistakes: result.data,
        loading: false
      });
    } else {
      throw new Error(result.error || 'è·å–æ•°æ®å¤±è´¥');
    }
    
  } catch (error) {
    console.error('åŠ è½½é”™é¢˜å¤±è´¥:', error);
    
    this.setData({ loading: false });
    
    // ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
    wx.showToast({
      title: 'åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•',
      icon: 'none'
    });
    
    // é”™è¯¯ä¸ŠæŠ¥
    this.reportError('load_mistakes_failed', error);
  }
}

// âŒ é”™è¯¯: ç¼ºå°‘é”™è¯¯å¤„ç†
async function loadMistakes() {
  const result = await DatabaseManager.getMistakes(this.userId);
  this.setData({ mistakes: result.data });
}
```

### ç½‘ç»œè¯·æ±‚é”™è¯¯å¤„ç†
```javascript
/**
 * é€šç”¨APIè¯·æ±‚å‡½æ•°
 */
async function apiRequest(url, options = {}) {
  const maxRetries = 3;
  let retryCount = 0;
  
  while (retryCount <= maxRetries) {
    try {
      const response = await wx.cloud.callFunction({
        name: 'api-gateway',
        data: {
          url,
          method: options.method || 'GET',
          data: options.data
        }
      });
      
      if (response.result.success) {
        return response.result;
      } else {
        throw new Error(response.result.error);
      }
      
    } catch (error) {
      retryCount++;
      
      if (retryCount > maxRetries) {
        // è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°
        throw new Error(`è¯·æ±‚å¤±è´¥: ${error.message}`);
      }
      
      // ç­‰å¾…åé‡è¯•
      await new Promise(resolve => setTimeout(resolve, 1000 * retryCount));
    }
  }
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

### æ•°æ®ç»‘å®šä¼˜åŒ–
```javascript
// âœ… æ­£ç¡®: åªæ›´æ–°å¿…è¦çš„æ•°æ®
updateMistakeStatus(mistakeId, newStatus) {
  const mistakes = this.data.mistakes.map(item => {
    if (item.id === mistakeId) {
      return { ...item, status: newStatus };
    }
    return item;
  });
  
  this.setData({
    [`mistakes`]: mistakes
  });
}

// âŒ é”™è¯¯: æ›´æ–°æ•´ä¸ªæ•°æ®å¯¹è±¡
updateMistakeStatus(mistakeId, newStatus) {
  this.data.mistakes.find(item => item.id === mistakeId).status = newStatus;
  this.setData({
    mistakes: this.data.mistakes
  });
}
```

### å›¾ç‰‡ä¼˜åŒ–
```javascript
// âœ… æ­£ç¡®: å›¾ç‰‡å‹ç¼©å’Œæ‡’åŠ è½½
const imageManager = {
  /**
   * å‹ç¼©å›¾ç‰‡
   */
  async compressImage(imagePath, quality = 0.8) {
    return new Promise((resolve, reject) => {
      wx.compressImage({
        src: imagePath,
        quality,
        success: resolve,
        fail: reject
      });
    });
  },

  /**
   * è·å–å›¾ç‰‡ä¿¡æ¯
   */
  async getImageInfo(imagePath) {
    return new Promise((resolve, reject) => {
      wx.getImageInfo({
        src: imagePath,
        success: resolve,
        fail: reject
      });
    });
  }
};
```

### é˜²æŠ–å’ŒèŠ‚æµ
```javascript
// utils/common.js

/**
 * é˜²æŠ–å‡½æ•°
 */
export function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

/**
 * èŠ‚æµå‡½æ•°
 */
export function throttle(func, limit) {
  let inThrottle;
  return function(...args) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
```

## ğŸ“¤ ä»£ç æäº¤è§„èŒƒ

### Git Commit æ¶ˆæ¯æ ¼å¼
```bash
<type>(<scope>): <subject>

<body>

<footer>
```

### æäº¤ç±»å‹è¯´æ˜
```bash
# åŠŸèƒ½å¼€å‘
feat: æ–°å¢åŠŸèƒ½
feat(practice): æ·»åŠ AIæ™ºèƒ½ç»ƒä¹ åŠŸèƒ½

# é”™è¯¯ä¿®å¤
fix: ä¿®å¤é—®é¢˜
fix(camera): ä¿®å¤å›¾ç‰‡ä¸Šä¼ å¤±è´¥çš„é—®é¢˜

# æ–‡æ¡£æ›´æ–°
docs: æ–‡æ¡£æ›´æ–°
docs: æ›´æ–°APIæ–‡æ¡£

# æ ·å¼è°ƒæ•´
style: ä»£ç é£æ ¼è°ƒæ•´ï¼ˆä¸å½±å“ä»£ç è¿è¡Œï¼‰
style: ç»Ÿä¸€ä»£ç ç¼©è¿›æ ¼å¼

# é‡æ„
refactor: é‡æ„ä»£ç 
refactor(utils): é‡æ„æ•°æ®åº“ç®¡ç†æ¨¡å—

# æ€§èƒ½ä¼˜åŒ–
perf: æ€§èƒ½ä¼˜åŒ–
perf: ä¼˜åŒ–å›¾ç‰‡åŠ è½½æ€§èƒ½

# æµ‹è¯•
test: æ·»åŠ æˆ–ä¿®æ”¹æµ‹è¯•
test: æ·»åŠ ç”¨æˆ·ç™»å½•æµ‹è¯•ç”¨ä¾‹

# æ„å»ºç›¸å…³
build: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
build: æ›´æ–°webpacké…ç½®

# CIç›¸å…³
ci: æŒç»­é›†æˆç›¸å…³
ci: æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹
```

### æäº¤å‰æ£€æŸ¥æ¸…å•
- [ ] ESLint æ£€æŸ¥é€šè¿‡ (`npm run lint`)
- [ ] åŠŸèƒ½æµ‹è¯•å®Œæˆ
- [ ] ç›¸å…³æ–‡æ¡£å·²æ›´æ–°
- [ ] æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒ
- [ ] æ²¡æœ‰è°ƒè¯•ä»£ç æ®‹ç•™

## ğŸ› ï¸ å¼€å‘å·¥å…·é…ç½®

### VSCode æ¨èæ’ä»¶
```json
// .vscode/extensions.json
{
  "recommendations": [
    "ms-vscode.vscode-json",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-eslint",
    "formulahendry.auto-rename-tag",
    "bradlc.vscode-tailwindcss",
    "ms-vscode.vscode-typescript-next"
  ]
}
```

### VSCode å·¥ä½œåŒºé…ç½®
```json
// .vscode/settings.json
{
  "editor.tabSize": 2,
  "editor.insertSpaces": true,
  "editor.detectIndentation": false,
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "files.exclude": {
    "**/node_modules": true,
    "**/miniprogram_npm": true,
    "**/.git": true
  },
  "emmet.includeLanguages": {
    "wxml": "html"
  }
}
```

## ğŸ“‹ ä»£ç å®¡æŸ¥æ¸…å•

### åŠŸèƒ½å®¡æŸ¥
- [ ] åŠŸèƒ½æ˜¯å¦æŒ‰éœ€æ±‚æ­£ç¡®å®ç°
- [ ] è¾¹ç•Œæ¡ä»¶æ˜¯å¦æ­£ç¡®å¤„ç†
- [ ] é”™è¯¯æƒ…å†µæ˜¯å¦æœ‰é€‚å½“å¤„ç†
- [ ] ç”¨æˆ·ä½“éªŒæ˜¯å¦å‹å¥½

### ä»£ç è´¨é‡å®¡æŸ¥
- [ ] ä»£ç ç»“æ„æ˜¯å¦æ¸…æ™°
- [ ] å‘½åæ˜¯å¦è§„èŒƒå’Œè¯­ä¹‰åŒ–
- [ ] æ˜¯å¦æœ‰ä¸å¿…è¦çš„ä»£ç é‡å¤
- [ ] æ³¨é‡Šæ˜¯å¦å……åˆ†å’Œå‡†ç¡®

### æ€§èƒ½å®¡æŸ¥
- [ ] æ˜¯å¦æœ‰æ€§èƒ½ç“¶é¢ˆ
- [ ] æ•°æ®ç»‘å®šæ˜¯å¦ä¼˜åŒ–
- [ ] å›¾ç‰‡èµ„æºæ˜¯å¦å‹ç¼©
- [ ] ç½‘ç»œè¯·æ±‚æ˜¯å¦åˆç†

### å®‰å…¨å®¡æŸ¥
- [ ] ç”¨æˆ·è¾“å…¥æ˜¯å¦éªŒè¯
- [ ] æ•æ„Ÿä¿¡æ¯æ˜¯å¦æ³„éœ²
- [ ] APIè°ƒç”¨æ˜¯å¦å®‰å…¨
- [ ] æƒé™æ§åˆ¶æ˜¯å¦åˆ°ä½

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ä»»ä½•å…³äºä»£ç è§„èŒƒçš„é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š

- **é‚®ç®±**: team@smartstudy.com
- **GitHub**: https://github.com/wangliang1234567890/smart-scholar-assistant

---

*æœ€åæ›´æ–°æ—¶é—´: 2024-01-15*
*æ–‡æ¡£ç‰ˆæœ¬: v1.0.0* 