<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIç»ƒä¹ é…ç½®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #A8F5E8 0%, #B8F5E8 50%, #C8F5E8 100%);
            min-height: 100vh;
        }
        
        .status-bar {
            height: 44px;
            background: transparent;
            color: #2D3748;
            font-size: 15px;
            font-weight: 600;
        }
        
        .content-area {
            height: calc(100vh - 44px - 90px);
            overflow-y: auto;
        }
        
        .bottom-nav {
            height: 90px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 24px 24px 0 0;
            box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.08);
        }
        
        .config-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
        }
        
        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }
        
        .option-card {
            padding: 16px 12px;
            border: 2px solid #E5E7EB;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.8);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .option-card.active {
            border-color: #40E0A0;
            background: rgba(64, 224, 160, 0.1);
            transform: scale(1.02);
        }
        
        .option-card:hover:not(.active) {
            border-color: #40E0A0;
            background: rgba(64, 224, 160, 0.05);
        }
        
        .option-icon {
            width: 48px;
            height: 48px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
        }
        
        .knowledge-point {
            padding: 8px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: inline-block;
            margin: 4px;
        }
        
        .knowledge-point.active {
            border-color: #40E0A0;
            background: #40E0A0;
            color: white;
        }
        
        .difficulty-slider {
            position: relative;
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            margin: 20px 0;
        }
        
        .difficulty-fill {
            height: 100%;
            background: linear-gradient(90deg, #10B981 0%, #F59E0B 50%, #EF4444 100%);
            border-radius: 4px;
            width: 60%;
            transition: width 0.3s ease;
        }
        
        .difficulty-thumb {
            position: absolute;
            top: -8px;
            right: 0;
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid #40E0A0;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .quantity-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .counter-btn {
            width: 44px;
            height: 44px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .counter-btn:hover {
            border-color: #40E0A0;
            background: rgba(64, 224, 160, 0.1);
        }
        
        .counter-btn:active {
            transform: scale(0.95);
        }
        
        .quantity-display {
            font-size: 32px;
            font-weight: 700;
            color: #40E0A0;
            min-width: 60px;
            text-align: center;
        }
        
        .start-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #40E0A0 0%, #48E0A8 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(64, 224, 160, 0.3);
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(64, 224, 160, 0.4);
        }
        
        .start-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .nav-item {
            transition: all 0.3s ease;
            border-radius: 16px;
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, #40E0A0 0%, #48E0A8 100%);
            box-shadow: 0 4px 16px rgba(64, 224, 160, 0.3);
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 8px;
            color: #40E0A0;
        }
        
        .preset-quick {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .preset-quick:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
    </style>
</head>
<body>
    <!-- iOSçŠ¶æ€æ  -->
    <div class="status-bar flex justify-between items-center px-6">
        <div class="flex items-center space-x-1">
            <div class="w-1.5 h-1.5 bg-current rounded-full"></div>
            <div class="w-1.5 h-1.5 bg-current rounded-full"></div>
            <div class="w-1.5 h-1.5 bg-current rounded-full"></div>
            <span class="ml-2">ä¸­å›½ç§»åŠ¨</span>
        </div>
        <div class="font-bold text-lg">9:41</div>
        <div class="flex items-center space-x-2">
            <i class="fas fa-signal text-lg"></i>
            <i class="fas fa-wifi text-lg"></i>
            <div class="w-7 h-4 border-2 border-current rounded-sm relative">
                <div class="w-4 h-2 bg-current rounded-sm absolute top-0.5 left-0.5"></div>
            </div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="content-area px-6">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <div class="pt-6 pb-4">
            <div class="flex items-center justify-between mb-6">
                <button onclick="goBack()" class="w-10 h-10 bg-white/80 rounded-full flex items-center justify-center backdrop-blur-lg">
                    <i class="fas fa-arrow-left text-gray-700"></i>
                </button>
                <div class="text-center">
                    <h1 class="text-2xl font-bold text-gray-900">AIç»ƒä¹ é…ç½®</h1>
                    <p class="text-gray-600 text-sm">ä¸ªæ€§åŒ–ç»ƒä¹ è®¾ç½®</p>
                </div>
                <div class="w-10 h-10"></div>
            </div>
        </div>

        <!-- å¿«é€Ÿé¢„è®¾ -->
        <div class="config-card p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
                <i class="fas fa-magic text-emerald-600 mr-2"></i>å¿«é€Ÿå¼€å§‹
            </h3>
            <div class="flex flex-wrap">
                <button class="preset-quick" onclick="setQuickPreset('review')">
                    <i class="fas fa-clock mr-2"></i>é”™é¢˜å¤ä¹  (5é¢˜)
                </button>
                <button class="preset-quick" onclick="setQuickPreset('practice')">
                    <i class="fas fa-dumbbell mr-2"></i>ä¸“é¡¹è®­ç»ƒ (10é¢˜)
                </button>
                <button class="preset-quick" onclick="setQuickPreset('test')">
                    <i class="fas fa-clipboard-check mr-2"></i>æ¨¡æ‹Ÿæµ‹è¯• (20é¢˜)
                </button>
            </div>
        </div>

        <!-- é¢˜ç›®æ¥æº -->
        <div class="config-card p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
                <i class="fas fa-source text-emerald-600 mr-2"></i>é¢˜ç›®æ¥æº
            </h3>
            <div class="grid grid-cols-2 gap-3">
                <div class="option-card active" data-source="mistakes">
                    <div class="option-icon bg-red-100">
                        <i class="fas fa-book text-red-600 text-xl"></i>
                    </div>
                    <div class="font-semibold text-gray-900 mb-1">æˆ‘çš„é”™é¢˜</div>
                    <div class="text-sm text-gray-500">åŸºäºé”™é¢˜ç”Ÿæˆ</div>
                </div>
                <div class="option-card" data-source="knowledge">
                    <div class="option-icon bg-blue-100">
                        <i class="fas fa-brain text-blue-600 text-xl"></i>
                    </div>
                    <div class="font-semibold text-gray-900 mb-1">çŸ¥è¯†ç‚¹</div>
                    <div class="text-sm text-gray-500">é€‰æ‹©çŸ¥è¯†ç‚¹ç»ƒä¹ </div>
                </div>
            </div>
        </div>

        <!-- ç§‘ç›®é€‰æ‹© -->
        <div class="config-card p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
                <i class="fas fa-graduation-cap text-emerald-600 mr-2"></i>é€‰æ‹©ç§‘ç›®
            </h3>
            <div class="grid grid-cols-3 gap-3">
                <div class="option-card active" data-subject="math">
                    <div class="option-icon bg-blue-100">
                        <i class="fas fa-calculator text-blue-600 text-xl"></i>
                    </div>
                    <div class="font-semibold text-gray-900">æ•°å­¦</div>
                </div>
                <div class="option-card" data-subject="chinese">
                    <div class="option-icon bg-red-100">
                        <i class="fas fa-book text-red-600 text-xl"></i>
                    </div>
                    <div class="font-semibold text-gray-900">è¯­æ–‡</div>
                </div>
                <div class="option-card" data-subject="english">
                    <div class="option-icon bg-green-100">
                        <i class="fas fa-globe text-green-600 text-xl"></i>
                    </div>
                    <div class="font-semibold text-gray-900">è‹±è¯­</div>
                </div>
            </div>
        </div>

        <!-- çŸ¥è¯†ç‚¹é€‰æ‹© -->
        <div class="config-card p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
                <i class="fas fa-tags text-emerald-600 mr-2"></i>çŸ¥è¯†ç‚¹é€‰æ‹© <span class="text-sm text-gray-500 font-normal">(å¯å¤šé€‰)</span>
            </h3>
            <div id="knowledgePoints">
                <div class="knowledge-point active" data-point="fraction">åˆ†æ•°è¿ç®—</div>
                <div class="knowledge-point" data-point="decimal">å°æ•°è®¡ç®—</div>
                <div class="knowledge-point" data-point="geometry">å‡ ä½•å›¾å½¢</div>
                <div class="knowledge-point" data-point="word-problem">åº”ç”¨é¢˜</div>
                <div class="knowledge-point" data-point="equation">æ–¹ç¨‹è§£æ³•</div>
                <div class="knowledge-point" data-point="measurement">å•ä½æ¢ç®—</div>
            </div>
        </div>

        <!-- éš¾åº¦å’Œæ•°é‡ -->
        <div class="config-card p-6 mb-4">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
                <i class="fas fa-sliders-h text-emerald-600 mr-2"></i>ç»ƒä¹ è®¾ç½®
            </h3>
            
            <!-- éš¾åº¦é€‰æ‹© -->
            <div class="mb-6">
                <div class="text-sm font-medium text-gray-700 mb-3">éš¾åº¦ç­‰çº§</div>
                <div class="grid grid-cols-3 gap-3">
                    <div class="option-card" data-difficulty="easy">
                        <div class="text-green-600 text-2xl mb-2">ğŸ˜Š</div>
                        <div class="font-medium">ç®€å•</div>
                    </div>
                    <div class="option-card active" data-difficulty="medium">
                        <div class="text-yellow-600 text-2xl mb-2">ğŸ¤”</div>
                        <div class="font-medium">ä¸­ç­‰</div>
                    </div>
                    <div class="option-card" data-difficulty="hard">
                        <div class="text-red-600 text-2xl mb-2">ğŸ˜¤</div>
                        <div class="font-medium">å›°éš¾</div>
                    </div>
                </div>
            </div>

            <!-- é¢˜ç›®æ•°é‡ -->
            <div>
                <div class="text-sm font-medium text-gray-700 mb-3">é¢˜ç›®æ•°é‡</div>
                <div class="flex items-center justify-center gap-6">
                    <button class="w-12 h-12 border-2 border-gray-300 rounded-lg flex items-center justify-center hover:border-emerald-500 transition-colors" onclick="changeQuantity(-1)">
                        <i class="fas fa-minus text-gray-600"></i>
                    </button>
                    <div class="text-3xl font-bold text-emerald-600" id="quantityDisplay">10</div>
                    <button class="w-12 h-12 border-2 border-gray-300 rounded-lg flex items-center justify-center hover:border-emerald-500 transition-colors" onclick="changeQuantity(1)">
                        <i class="fas fa-plus text-gray-600"></i>
                    </button>
                </div>
                <div class="text-center text-sm text-gray-500 mt-2">
                    é¢„è®¡ç”¨æ—¶ï¼š<span id="estimatedTime">15-20åˆ†é’Ÿ</span>
                </div>
            </div>
        </div>

        <!-- å¼€å§‹ç»ƒä¹  -->
        <div class="config-card p-6 mb-8">
            <button class="start-btn" onclick="startPractice()">
                <i class="fas fa-play mr-2"></i>å¼€å§‹AIç»ƒä¹ 
            </button>
            <div class="text-center text-sm text-gray-500 mt-3">
                <i class="fas fa-info-circle mr-1"></i>AIå°†æ ¹æ®ä½ çš„é…ç½®ç”Ÿæˆä¸ªæ€§åŒ–é¢˜ç›®
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <div class="bottom-nav flex items-center justify-around px-4">
        <div class="nav-item text-center cursor-pointer py-3 px-4" onclick="jumpToPage('home')">
            <i class="fas fa-home text-gray-400 text-xl mb-1"></i>
            <div class="text-xs font-medium text-gray-500">é¦–é¡µ</div>
        </div>
        <div class="nav-item text-center cursor-pointer py-3 px-4" onclick="jumpToPage('mistakes')">
            <i class="fas fa-book text-gray-400 text-xl mb-1"></i>
            <div class="text-xs font-medium text-gray-500">é”™é¢˜æœ¬</div>
        </div>
        <div class="nav-item text-center cursor-pointer py-3 px-4" onclick="jumpToPage('camera')">
            <i class="fas fa-camera text-gray-400 text-xl mb-1"></i>
            <div class="text-xs font-medium text-gray-500">æ‹ç…§</div>
        </div>
        <div class="nav-item text-center cursor-pointer py-3 px-4" onclick="jumpToPage('report')">
            <i class="fas fa-chart-bar text-gray-400 text-xl mb-1"></i>
            <div class="text-xs font-medium text-gray-500">æŠ¥å‘Š</div>
        </div>
        <div class="nav-item text-center cursor-pointer py-3 px-4" onclick="jumpToPage('profile')">
            <i class="fas fa-user text-gray-400 text-xl mb-1"></i>
            <div class="text-xs font-medium text-gray-500">æˆ‘çš„</div>
        </div>
    </div>

    <script>
        let currentQuantity = 10;
        let selectedDifficulty = 'medium';
        let selectedSubject = 'math';
        let selectedSource = 'mistakes';
        let selectedKnowledgePoints = ['fraction'];

        function jumpToPage(page) {
            if (window.parent && window.parent.postMessage) {
                window.parent.postMessage({
                    type: 'jumpToPage',
                    page: page
                }, '*');
            }
        }

        function goBack() {
            jumpToPage('home');
        }

        // å¿«é€Ÿé¢„è®¾
        function setQuickPreset(type) {
            const presets = {
                'review': { quantity: 5, difficulty: 'easy', source: 'mistakes' },
                'practice': { quantity: 10, difficulty: 'medium', source: 'knowledge' },
                'test': { quantity: 20, difficulty: 'hard', source: 'knowledge' }
            };
            
            const preset = presets[type];
            currentQuantity = preset.quantity;
            selectedDifficulty = preset.difficulty;
            selectedSource = preset.source;
            
            updateUI();
        }

        // æ•°é‡è°ƒæ•´
        function changeQuantity(delta) {
            currentQuantity += delta;
            if (currentQuantity < 1) currentQuantity = 1;
            if (currentQuantity > 50) currentQuantity = 50;
            updateUI();
        }

        // æ›´æ–°UI
        function updateUI() {
            document.getElementById('quantityDisplay').textContent = currentQuantity;
            
            // æ›´æ–°é¢„è®¡æ—¶é—´
            const timeEstimate = Math.ceil(currentQuantity * 1.5) + '-' + Math.ceil(currentQuantity * 2);
            document.getElementById('estimatedTime').textContent = timeEstimate + 'åˆ†é’Ÿ';
        }

        // é¢˜ç›®æ¥æºé€‰æ‹©
        document.querySelectorAll('[data-source]').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('[data-source]').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                selectedSource = this.dataset.source;
            });
        });

        // ç§‘ç›®é€‰æ‹©
        document.querySelectorAll('[data-subject]').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('[data-subject]').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                selectedSubject = this.dataset.subject;
                updateKnowledgePoints();
            });
        });

        // éš¾åº¦é€‰æ‹©
        document.querySelectorAll('[data-difficulty]').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('[data-difficulty]').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                selectedDifficulty = this.dataset.difficulty;
            });
        });

        // çŸ¥è¯†ç‚¹é€‰æ‹©
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('knowledge-point')) {
                const point = e.target.dataset.point;
                if (e.target.classList.contains('active')) {
                    e.target.classList.remove('active');
                    selectedKnowledgePoints = selectedKnowledgePoints.filter(p => p !== point);
                } else {
                    e.target.classList.add('active');
                    selectedKnowledgePoints.push(point);
                }
            }
        });

        // æ›´æ–°çŸ¥è¯†ç‚¹
        function updateKnowledgePoints() {
            const knowledgePointsData = {
                'math': [
                    { id: 'fraction', name: 'åˆ†æ•°è¿ç®—' },
                    { id: 'decimal', name: 'å°æ•°è®¡ç®—' },
                    { id: 'geometry', name: 'å‡ ä½•å›¾å½¢' },
                    { id: 'word-problem', name: 'åº”ç”¨é¢˜' },
                    { id: 'equation', name: 'æ–¹ç¨‹è§£æ³•' },
                    { id: 'measurement', name: 'å•ä½æ¢ç®—' }
                ],
                'chinese': [
                    { id: 'pinyin', name: 'æ‹¼éŸ³è¯†åˆ«' },
                    { id: 'character', name: 'æ±‰å­—ä¹¦å†™' },
                    { id: 'reading', name: 'é˜…è¯»ç†è§£' },
                    { id: 'composition', name: 'ä½œæ–‡å†™ä½œ' },
                    { id: 'poetry', name: 'å¤è¯—è¯' },
                    { id: 'grammar', name: 'è¯­æ³•çŸ¥è¯†' }
                ],
                'english': [
                    { id: 'vocabulary', name: 'å•è¯æ‹¼å†™' },
                    { id: 'grammar', name: 'è¯­æ³•å¡«ç©º' },
                    { id: 'reading', name: 'é˜…è¯»ç†è§£' },
                    { id: 'listening', name: 'å¬åŠ›è®­ç»ƒ' },
                    { id: 'speaking', name: 'å£è¯­å¯¹è¯' },
                    { id: 'writing', name: 'è‹±è¯­å†™ä½œ' }
                ]
            };

            const container = document.getElementById('knowledgePoints');
            const points = knowledgePointsData[selectedSubject] || [];
            
            container.innerHTML = points.map(point => 
                `<div class="knowledge-point ${selectedKnowledgePoints.includes(point.id) ? 'active' : ''}" 
                      data-point="${point.id}">${point.name}</div>`
            ).join('');
        }

        // å¼€å§‹ç»ƒä¹ 
        function startPractice() {
            if (selectedKnowledgePoints.length === 0) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼');
                return;
            }

            // æ˜¾ç¤ºåŠ è½½æ•ˆæœ
            const btn = document.querySelector('.start-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>AIæ­£åœ¨ç”Ÿæˆé¢˜ç›®...';
            btn.disabled = true;

            setTimeout(() => {
                jumpToPage('ai-practice');
            }, 2000);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateUI();
            updateKnowledgePoints();
        });
    </script>
</body>
</html> 